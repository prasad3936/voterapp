<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{{ title if title else "Voter Information System" }}</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <!-- Bootstrap -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <style>
      html,
      body {
        margin: 0;
        background: #f4f8ff;
        font-family: Arial, sans-serif;
        height: 100%;
        display: flex;
        flex-direction: column;
      }

      /* Navbar */
      .navbar {
        background: #003366;
        padding: 10px 14px;
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
      }

      .navbar a {
        color: white;
        margin-left: 12px;
        text-decoration: none;
        font-size: 14px;
        font-weight: bold;
      }

      .navbar a:hover {
        text-decoration: underline;
      }

      /* Total Voter Badge */
      #voterCountBadge {
        background: linear-gradient(90deg, #007bff, #00b4ff);
        color: #fff;
        font-weight: 700;
        border-radius: 20px;
        padding: 6px 12px;
        margin-left: 8px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
      }

      footer {
        background: #002850;
        color: #fff;
        text-align: center;
        padding: 8px 0;
        font-size: 13px;
        margin-top: auto;
      }

      footer a {
        color: #00ffb3;
        text-decoration: none;
        font-weight: bold;
      }

      footer a:hover {
        text-decoration: underline;
      }

      /* Contact Button */
      .contact-dev-btn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #25d366;
        color: white;
        padding: 10px 16px;
        border-radius: 30px;
        font-size: 14px;
        font-weight: 600;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        cursor: pointer;
        z-index: 9999;
        transition: 0.3s;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .contact-dev-btn:hover {
        transform: scale(1.05);
        background: #22c15e;
      }
    </style>
  </head>

  <body>
    <!-- NAVBAR -->
    <div class="navbar">
      <div class="navbar-title fw-bold">Voter Information System</div>

      {% if session.get('user') %}
      <div class="d-flex align-items-center flex-wrap">
        <a href="/dashboard">üè† Home</a>

        <!-- Total Voters Badge -->
        {% if total_voters %}
        <span id="voterCountBadge">Total: {{ total_voters }}</span>
        {% endif %}

        <!-- Username -->
        <span class="ms-3 text-warning fw-bold">
          <i class="fa-solid fa-user"></i> {{ session.get('user') }}
        </span>

        <!-- Logout Button -->
        <a href="/logout" class="btn btn-sm btn-danger ms-3">
          <i class="fa-solid fa-right-from-bracket"></i> Logout
        </a>
      </div>
      {% endif %}
    </div>

    <!-- FLASH MESSAGES -->
    <div class="container mt-2">
      {% with messages = get_flashed_messages(with_categories=true) %} {% if
      messages %} {% for category, msg in messages %}
      <div class="alert alert-{{ category }} alert-dismissible fade show">
        {{ msg }}
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="alert"
        ></button>
      </div>
      {% endfor %} {% endif %} {% endwith %}
    </div>

    <!-- PAGE CONTENT -->
    <div class="content-wrapper container mt-2">
      {% block content %}{% endblock %}
    </div>

    <!-- Floating Contact Button -->
    <div
      class="contact-dev-btn"
      onclick="window.open('https://wa.me/919637370116?text=Hi%20Prasad%2C%20I%20need%20help%20with%20a%20web%20project!', '_blank')"
    >
      <i class="fa-brands fa-whatsapp"></i> Contact Developer
    </div>

    <!-- FOOTER -->
    <footer>
      Copyright ¬© 2025 |
      <strong>Developed by Prasad Zungare Patil</strong> |
      <a href="https://wa.me/919637370116">WhatsApp</a>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
