{% extends "base.html" %}
{% block content %}

<div class="container mt-3">

<h3 class="text-primary fw-bold mb-3">मतदार यादी</h3>

<form method="get" class="row g-2 mb-3">
  <div class="col-md-4">
      <input class="form-control" name="q" value="{{q}}" placeholder="Search name / voter id / address">
  </div>
  <div class="col-md-2">
      <select name="gender" class="form-select">
          <option value="">Gender</option>
          <option value="Male" {% if gender=='Male' %}selected{% endif %}>Male</option>
          <option value="Female" {% if gender=='Female' %}selected{% endif %}>Female</option>
      </select>
  </div>
  <div class="col-md-2">
      <select name="caste" class="form-select">
          <option value="">Caste</option>
          <option value="GEN" {% if caste=='GEN' %}selected{% endif %}>GEN</option>
          <option value="OBC" {% if caste=='OBC' %}selected{% endif %}>OBC</option>
          <option value="SC" {% if caste=='SC' %}selected{% endif %}>SC</option>
      </select>
  </div>
  <div class="col-md-2">
      <button class="btn btn-primary w-100">Search</button>
  </div>
</form>

<table class="table table-bordered table-hover bg-white shadow-sm">
<thead class="table-primary">
<tr>
<th>Photo</th><th>Name</th><th>Serial</th><th>Voter ID</th><th>Age</th><th>Action</th>
</tr>
</thead>
<tbody>
{% for v in voters %}
<tr>
<td><img src="/{{v.photo}}" width="50" height="50" style="border-radius:6px"></td>
<td>{{v.name}}</td>
<td>{{v.voter_serial}}</td>
<td>{{v.voter_id}}</td>
<td>{{v.age}}</td>
<td><a class="btn btn-success btn-sm" href="/voter/{{v.id}}">View</a></td>
</tr>
{% endfor %}
</tbody>
</table>

<!-- Pagination -->
<nav>
<ul class="pagination">
{% for p in range(1,total_pages+1) %}
<li class="page-item {% if p==page %}active{% endif %}">
  <a class="page-link" href="?page={{p}}&q={{q}}&gender={{gender}}&caste={{caste}}">{{p}}</a>
</li>
{% endfor %}
</ul>
</nav>

</div>
{% endblock %}
